<html>
    <body>
        <script>
            let promessa = new Promise((resolve, reject)=>{
                /*try{

                }catch(e){

                }*/

                //requisição http para recuperar relação de usuários
                setTimeout(()=>{
                    //requisição realizada de algum modo
                    let resposta_da_requisicao = {}

                    //erro na requisição
                    if(false){   //trocar true ou false pra erro ou sucesso respectivamente
                        resposta_da_requisicao = {
                            codigo:1050,
                            erro: 'Falha de autorização'
                        }
                        reject(resposta_da_requisicao)
                    }

                    resposta_da_requisicao = {
                        0:{id:1, nome:'João'},
                        1:{id:2, nome:'José'},
                        2:{id:3, nome:'Maria'}
                    }
                    resolve(resposta_da_requisicao)

                }, 4000)

            }).then(dados => {
                console.log('Operação sequencial: ', dados)
                //return 'Parâmetro 1 para o then 2'

                let promessa2 = new Promise((resolve, reject)=>{
                    //requisição http para recuperar uma relação de posts dos usuários
                    setTimeout(()=>{
                        //requisição realizada de algum modo
                        let resposta_da_requisicao = {}

                        //erro na requisição
                        if(false){   //trocar true ou false pra erro ou sucesso respectivamente
                            resposta_da_requisicao = {
                                codigo:7788,
                                erro: 'Erro ao recuperar os posts dos usuários'
                            }
                            reject(resposta_da_requisicao)
                        }

                        resposta_da_requisicao = {
                            0:{id:1, usuario_id:1, posts:[
                                {id:1, post:'Post 1'},
                                {id:2, post:'Post 2'}
                            ]},
                            1:{id:2, usuario_id:2, posts:[
                                {id:3, post:'Post 1'},
                                {id:4, post:'Post 2'}
                            ]},
                            2:{id:3, usuario_id:3, posts:[
                                {id:5, post:'Post 1'},
                                {id:6, post:'Post 2'}
                            ]}
                        }
                        resolve(resposta_da_requisicao)

                    }, 4000)
                }).then(dados => {
                    console.log(dados)
                }).catch(error =>{
                    console.log(error)
                })
            }).then((param) => {
                console.log('Then número 2... ', param)

                return 'Parâmetro capturado no then anterior'
            }).catch(erro => {
                console.log('Operação sequencial (Catch): ', erro)

                return 'Parâmetro capturado no catch e enviado para o then 3'
            }).then((param) => {
                console.log('Then número 3... ', param)
            }).then(() => {
                console.log('Then número 4... ')
            })
        </script>
    </body>
</html>